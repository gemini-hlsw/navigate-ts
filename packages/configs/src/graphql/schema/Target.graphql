#import DateTime from "./Scalars.graphql"
#import PosInt, TargetId, Instrument, AngleInput, ObservationId from "lucuma-schemas/odb"
#import Configuration from "./Configuration.graphql"
#import Rotator from "./Rotator.graphql"

enum TargetType {
  FIXED
  SCIENCE
  BLINDOFFSET
  PWFS1
  PWFS2
  OIWFS
}

enum EphemerisKeyType {
  ASTEROID_NEW
  ASTEROID_OLD
  COMET
  MAJOR_BODY
  USER_SUPPLIED
}

type RA {
  degrees: Float!
  hms: String!
}

type Dec {
  degrees: Float!
  dms: String!
}

type ProperMotion {
  ra: Float!
  dec: Float!
}

type Az {
  degrees: Float!
  dms: String!
}

type El {
  degrees: Float!
  dms: String!
}

type Target {
  "Primary Key"
  pk: PosInt!
  "Target ID"
  id: TargetId!
  "Name of the target"
  name: String!
  "Magnitude of the target"
  magnitude: Float
  "Magnitude band"
  band: String
  "FIXED | SCIENCE | BLINDOFFSET | PWFS1 | PWFS2 | OIWFS"
  type: TargetType!
  "Wavelength"
  wavelength: Int

  sidereal: SiderealTarget
  nonsidereal: NonsiderealTarget

  "Datetime when it was created"
  createdAt: DateTime!
}

type SiderealTarget {
  "Primary Key"
  pk: PosInt!
  "Right Ascension"
  ra: RA
  "Azimuth"
  az: Az
  "Elevation"
  el: El
  "Declination"
  dec: Dec
  "Proper Motions RA & Dec"
  properMotion: ProperMotion
  "Radial Velocity"
  radialVelocity: Float
  "Parallax"
  parallax: Float
  "Epoch of target"
  epoch: String!
}

type NonsiderealTarget {
  "Primary Key"
  pk: PosInt!
  "Synthesis of `keyType` and `des`"
  keyType: EphemerisKeyType!
  "Human readable designation that discriminates among ephemeris keys of the same type."
  des: String!
}

type Query {
  targets: [Target!]!
}

input TargetInput {
  id: TargetId!
  name: String
  magnitude: Float
  band: String
  type: TargetType
  wavelength: Int

  sidereal: SiderealTargetInput
  nonsidereal: NonsiderealTargetInput
}

input SiderealTargetInput {
  coord1: Float!
  coord2: Float!
  pmRa: Float
  pmDec: Float
  radialVelocity: Float
  parallax: Float
  epoch: String
}

input NonsiderealTargetInput {
  "Human readable designation that discriminates among ephemeris keys of the same type."
  des: String!
  "Synthesis of `keyType` and `des`"
  keyType: EphemerisKeyType!
}

input SiderealTargetUpdateInput {
  coord1: Float
  coord2: Float
  pmRa: Float
  pmDec: Float
  radialVelocity: Float
  parallax: Float
  epoch: String
}

input NonsiderealTargetUpdateInput {
  des: String
  keyType: EphemerisKeyType
}

input ObservationInput {
  id: ObservationId!
  title: String!
  subtitle: String
  instrument: Instrument
  reference: String
}

input ImportObservationTargetsInput {
  base: [TargetInput!]!
  oiwfs: [TargetInput!]!
  pwfs1: [TargetInput!]!
  pwfs2: [TargetInput!]!
}

input ImportObservationInput {
  configurationPk: PosInt!
  rotatorPk: PosInt!
  observation: ObservationInput!
  targets: ImportObservationTargetsInput!
  guideEnvironmentAngle: AngleInput
}

type ImportObservationResult {
  configuration: Configuration!
  rotator: Rotator!
}

type Mutation {
  updateTarget(
    pk: PosInt!
    id: TargetId
    name: String
    magnitude: Float
    band: String
    type: TargetType
    wavelength: Int
    sidereal: SiderealTargetUpdateInput
    nonsidereal: NonsiderealTargetUpdateInput
  ): Target!

  removeAndCreateBaseTargets(targets: [TargetInput!]): [Target!]!

  importObservation(input: ImportObservationInput!): ImportObservationResult
}
