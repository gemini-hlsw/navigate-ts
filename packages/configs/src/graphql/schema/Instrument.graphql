#import DateTime, Void, JSON from "./Scalars.graphql"
#import Instrument, PosInt from "lucuma-schemas/odb"

enum WfsType {
  NONE
  PWFS1
  PWFS2
  OIWFS
}

type InstrumentConfig {
  "Record primary key"
  pk: PosInt!
  "Instrument name"
  name: Instrument!
  "Instrument Alignment Angle"
  iaa: Float!
  "Instrument Support Structure port"
  issPort: Int!
  "Focus offset"
  focusOffset: Float!
  "Asociated Wavefront Sensor"
  wfs: WfsType!
  "Origin of instrument X position"
  originX: Float!
  "Origin of instrument Y position"
  originY: Float!
  "Adaptive Optics is being used?"
  ao: Boolean!
  "Instrument dependent set of parameters"
  extraParams: JSON!
  "Whether the instrument parameters are temporary (not a new configuration)"
  isTemporary: Boolean!
  alignAngle: Float
  "Comment about the update"
  comment: String
  "Datetime when it was created"
  createdAt: DateTime!
}

type Query {
  instrument(name: Instrument, issPort: Int, wfs: WfsType, extraParams: JSON): InstrumentConfig!

  instruments(name: Instrument, issPort: Int, wfs: WfsType, extraParams: JSON): [InstrumentConfig!]!

  distinctInstruments: [Instrument!]!

  distinctPorts(name: Instrument): [Int!]!
}

type Mutation {
  createInstrument(
    "Instrument name"
    name: Instrument!
    "Instrument Alignment Angle"
    iaa: Float
    "Instrument Support Structure port"
    issPort: Int!
    "Focus offset"
    focusOffset: Float
    "Asociated Wavefront Sensor"
    wfs: WfsType
    "Origin of instrument X position"
    originX: Float
    "Origin of instrument Y position"
    originY: Float
    "Adaptive Optics is being used?"
    ao: Boolean
    "Instrument dependent set of parameters"
    extraParams: JSON
    "Whether the instrument parameters are temporary (not a new configuration)"
    isTemporary: Boolean
    alignAngle: Float
    "Comment about the update"
    comment: String
  ): InstrumentConfig!

  updateInstrument(
    pk: PosInt!
    name: Instrument
    iaa: Float
    issPort: Int
    focusOffset: Float
    wfs: WfsType
    originX: Float
    originY: Float
    ao: Boolean
    extraParams: JSON
    isTemporary: Boolean
    alignAngle: Float
    comment: String
  ): InstrumentConfig!

  "Set temporary instrument parameters, that will not be saved as a new configuration"
  setTemporaryInstrument(
    name: Instrument!
    iaa: Float
    issPort: Int!
    focusOffset: Float
    wfs: WfsType
    originX: Float
    originY: Float
    ao: Boolean
    extraParams: JSON
    alignAngle: Float
    comment: String
  ): InstrumentConfig!

  "Reset the instruments to their default values, removing all temporary configurations"
  resetInstruments(name: Instrument!): Void

  deleteInstrument(pk: PosInt!): Void
}
